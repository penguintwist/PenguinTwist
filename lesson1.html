<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 1: Hello World - PenguinTwist</title>
    
    <!-- CodeMirror CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
            transition: all 0.3s ease;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .dark-mode-toggle {
            position: absolute;
            top: 1rem;
            right: 2rem;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .dark-mode-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .nav-back {
            background: white;
            padding: 1rem 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        
        .nav-back .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .nav-back a {
            color: #667eea;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .nav-back a:hover {
            text-decoration: underline;
        }
        
        .lesson-content {
            background: white;
            margin: 2rem auto;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 2rem;
            transition: all 0.3s ease;
        }
        
        .section {
            margin-bottom: 3rem;
        }
        
        .section h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 0.5rem;
        }
        
        .intro {
            background: #e8f4fd;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #4facfe;
        }
        
        .theory {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        
        .code-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'Fira Code', 'Courier New', monospace;
            white-space: pre-line;
            line-height: 1.4;
        }
        
        .expected-output {
            background: #e8f5e8;
            color: #2d5016;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            border-left: 4px solid #28a745;
            font-family: 'Fira Code', 'Courier New', monospace;
        }
        
        .tip {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            border-left: 4px solid #fdcb6e;
        }
        
        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            border-left: 4px solid #dc3545;
        }
        
        /* Visual Metaphor Styles */
        .print-metaphor {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 2rem;
            border-radius: 12px;
            margin: 2rem 0;
            border: 2px solid #667eea;
            position: relative;
            overflow: hidden;
        }
        
        .metaphor-title {
            text-align: center;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }
        
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .flow-step {
            flex: 1;
            min-width: 180px;
            text-align: center;
            position: relative;
        }
        
        .flow-box {
            background: white;
            border: 3px solid #667eea;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
            transition: all 0.3s ease;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .flow-box.animated {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2); }
            50% { transform: scale(1.05); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
        }
        
        .flow-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .flow-label {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 0.5rem;
        }
        
        .flow-description {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.3;
        }
        
        .flow-arrow {
            font-size: 2rem;
            color: #667eea;
            animation: float 2s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(10px); }
        }
        
        .message-box {
            background: #4facfe;
            color: white;
            padding: 0.8rem 1.2rem;
            border-radius: 8px;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-weight: bold;
            display: inline-block;
            position: relative;
            animation: messageFloat 3s ease-in-out infinite;
        }
        
        @keyframes messageFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-5px) rotate(1deg); }
            75% { transform: translateY(-3px) rotate(-1deg); }
        }
        
        .message-box::before {
            content: "✉️";
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 1.2rem;
        }
        
        /* Animation Demo Section */
        .animation-demo {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            color: white;
            position: relative;
        }
        
        .demo-controls {
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .demo-btn {
            background: #4facfe;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .demo-btn:hover {
            background: #359ff0;
            transform: translateY(-2px);
        }
        
        .execution-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .step {
            background: #2d3748;
            border-radius: 8px;
            padding: 1rem;
            border-left: 4px solid #4facfe;
            opacity: 0.3;
            transition: all 0.5s ease;
        }
        
        .step.active {
            opacity: 1;
            background: #4a5568;
            transform: scale(1.05);
        }
        
        .step-number {
            background: #4facfe;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .step-title {
            color: #4facfe;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .step-description {
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .python-playground {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            overflow: hidden;
            margin: 2rem 0;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
        }
        
        .playground-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 1.5rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .playground-controls {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-run {
            background: #28a745;
            color: white;
        }
        
        .btn-run:hover {
            background: #218838;
            transform: translateY(-1px);
        }
        
        .btn-reset {
            background: #6c757d;
            color: white;
        }
        
        .btn-reset:hover {
            background: #545b62;
            transform: translateY(-1px);
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .editor-container {
            position: relative;
        }
        
        .CodeMirror {
            height: 150px;
            font-size: 14px;
            font-family: 'Fira Code', 'Courier New', monospace;
        }
        
        #challengeArea .CodeMirror {
            height: 200px;
        }
        
        .output-container {
            background: #1a1a1a;
            color: #00ff00;
            padding: 1rem;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
            border-top: 1px solid #333;
            min-height: 60px;
        }
        
        .output-container:empty::before {
            content: "Click 'Run Code' to see your output here...";
            color: #666;
            font-style: italic;
        }
        
        .loading {
            color: #ffc107;
        }
        
        .error {
            color: #ff6b6b;
        }
        
        .success {
            color: #28a745;
        }
        
        .mastery-check {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border-radius: 12px;
            color: white;
        }
        
        .mastery-check h4 {
            margin-bottom: 1rem;
            font-size: 1.2rem;
            text-align: center;
        }
        
        .mastery-question {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }
        
        .mastery-question input[type="text"] {
            width: 100%;
            padding: 0.5rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-family: 'Fira Code', 'Courier New', monospace;
            margin-top: 0.5rem;
        }
        
        .check-answer-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: block;
            margin: 1rem auto;
        }
        
        .check-answer-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 6px;
            text-align: center;
            font-weight: 600;
        }
        
        .feedback.correct {
            background: rgba(40, 167, 69, 0.2);
            border: 2px solid rgba(40, 167, 69, 0.5);
        }
        
        .feedback.incorrect {
            background: rgba(220, 53, 69, 0.2);
            border: 2px solid rgba(220, 53, 69, 0.5);
        }
        
        .practice-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            color: white;
        }
        
        .practice-section h4 {
            margin-bottom: 1rem;
            font-size: 1.3rem;
            text-align: center;
        }
        
        .practice-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        
        .practice-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .practice-card:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .practice-card h5 {
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .practice-card p {
            margin-bottom: 1rem;
            opacity: 0.9;
            line-height: 1.4;
        }
        
        .difficulty-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            position: absolute;
            bottom: 1rem;
            right: 1rem;
        }
        
        .difficulty-badge.basic {
            background: rgba(40, 167, 69, 0.8);
            color: white;
        }
        
        .difficulty-badge.creative {
            background: rgba(255, 193, 7, 0.8);
            color: #333;
        }
        
        .difficulty-badge.advanced {
            background: rgba(220, 53, 69, 0.8);
            color: white;
        }
        
        .challenge-area {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 12px;
            border: 2px solid #e9ecef;
        }
        
        .challenge-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .challenge-header h4 {
            color: #667eea;
            margin: 0;
        }
        
        .close-challenge-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .close-challenge-btn:hover {
            background: #c82333;
        }
        
        .challenge-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e9ecef;
        }
        
        .nav-challenge-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .nav-challenge-btn:hover {
            background: #5a6fd8;
        }
        
        .nav-challenge-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        #challengeCounter {
            font-weight: 600;
            color: #667eea;
        }
        
        .lesson-navigation {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin: 2rem 0;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 25px;
            text-decoration: none;
            display: inline-block;
            font-weight: 600;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .nav-btn.disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Dark Mode Styles */
        body.dark-mode {
            background: #1a1a1a;
            color: #e0e0e0;
        }
        
        body.dark-mode .header {
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
        }
        
        body.dark-mode .dark-mode-toggle {
            background: rgba(251, 191, 36, 0.2);
            border-color: rgba(251, 191, 36, 0.3);
            color: #fbbf24;
        }
        
        body.dark-mode .dark-mode-toggle:hover {
            background: rgba(251, 191, 36, 0.3);
        }
        
        body.dark-mode .nav-back {
            background: #2d3748;
        }
        
        body.dark-mode .nav-back a {
            color: #81c784;
        }
        
        body.dark-mode .lesson-content,
        body.dark-mode .lesson-navigation {
            background: #2d3748;
            color: #e0e0e0;
        }
        
        body.dark-mode .intro {
            background: #1e3a3a;
            border-left-color: #4facfe;
        }
        
        body.dark-mode .theory {
            background: #1e2d1e;
            border-left-color: #28a745;
        }
        
        body.dark-mode .tip {
            background: #3d3520;
            border-color: #ffeaa7;
            color: #fff3cd;
        }
        
        body.dark-mode .warning {
            background: #3d2020;
            border-color: #f5c6cb;
            color: #f8d7da;
        }
        
        body.dark-mode .expected-output {
            background: #1e2d1e;
            color: #81c784;
        }
        
        body.dark-mode .section h3 {
            color: #81c784;
            border-bottom-color: #81c784;
        }
        
        body.dark-mode .print-metaphor {
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            border-color: #81c784;
        }
        
        body.dark-mode .metaphor-title {
            color: #81c784;
        }
        
        body.dark-mode .flow-box {
            background: #1a202c;
            border-color: #81c784;
        }
        
        body.dark-mode .flow-label {
            color: #81c784;
        }
        
        body.dark-mode .flow-arrow {
            color: #81c784;
        }
        
        body.dark-mode .challenge-area {
            background: #2d3748;
            border-color: #4a5568;
        }
        
        body.dark-mode #challengeDescription {
            background: #1a202c !important;
            color: #ffffff !important;
        }
        
        body.dark-mode #challengeDescription div {
            background: #1a202c !important;
            color: #ffffff !important;
        }
        
        body.dark-mode #challengeDescription strong {
            color: #4facfe !important;  /* Blue for "Task:" to make it stand out */
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .lesson-content {
                padding: 1rem;
            }
            
            .playground-header {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .dark-mode-toggle {
                top: 0.5rem;
                right: 1rem;
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }
            
            .flow-diagram {
                flex-direction: column;
            }
            
            .flow-arrow {
                transform: rotate(90deg);
            }
            
            .execution-steps {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <button id="darkModeToggle" class="dark-mode-toggle">🌙 Dark Mode</button>
        <div class="container">
            <h1>Lesson 1: Hello World</h1>
            <p>Learn how to make the computer display a message</p>
        </div>
    </div>
    
    <div class="nav-back">
        <div class="container">
            <a href="navigation.html">← Back to All Lessons</a>
        </div>
    </div>
    
    <div class="container">
        <div class="lesson-content">
            <div class="section">
                <h3>Why Programmes Need to Communicate</h3>
                <div class="intro">
                    <p>Computers are powerful machines, but they can't speak to us naturally. When you write a programme, you need a way to see what the computer is thinking and doing.</p>
                    <p>The <code>print()</code> function is like giving your computer a voice - it displays messages on the screen so you can see what's happening inside your programme.</p>
                </div>
            </div>
            
            <div class="section">
                <h3>How Print Works - The Message Delivery System</h3>
                <div class="print-metaphor">
                    <div class="metaphor-title">Think of print() as a Message Delivery Service</div>
                    <div class="flow-diagram">
                        <div class="flow-step">
                            <div class="flow-box">
                                <div class="flow-icon">📝</div>
                                <div class="flow-label">1. You Write</div>
                                <div class="flow-description">You write your message in quotes</div>
                                <div style="margin-top: 0.5rem; font-family: monospace; font-size: 0.8rem; color: #4facfe;">print("Hello!")</div>
                            </div>
                        </div>
                        
                        <div class="flow-arrow">→</div>
                        
                        <div class="flow-step">
                            <div class="flow-box">
                                <div class="flow-icon">🐍</div>
                                <div class="flow-label">2. Python Reads</div>
                                <div class="flow-description">Python finds your message and prepares to deliver it</div>
                                <div class="message-box">Hello!</div>
                            </div>
                        </div>
                        
                        <div class="flow-arrow">→</div>
                        
                        <div class="flow-step">
                            <div class="flow-box">
                                <div class="flow-icon">🖥️</div>
                                <div class="flow-label">3. Screen Shows</div>
                                <div class="flow-description">Your message appears on the screen for everyone to see!</div>
                                <div style="background: #1a1a1a; color: #00ff00; padding: 0.5rem; border-radius: 4px; font-family: monospace; margin-top: 0.5rem;">Hello!</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h3>Watch Print() in Action</h3>
                <div class="animation-demo">
                    <div class="demo-controls">
                        <button class="demo-btn" onclick="playExecutionDemo()">▶ Watch How Print Works</button>
                    </div>
                    <div class="execution-steps">
                        <div class="step" id="step1">
                            <div class="step-number">1</div>
                            <div class="step-title">Code Written</div>
                            <div class="step-description">You type: print("Hello, World!")</div>
                        </div>
                        <div class="step" id="step3">
                            <div class="step-number">3</div>
                            <div class="step-title">Message Extracted</div>
                            <div class="step-description">Python takes the text from between the quotes and prepares to display it</div>
                        </div>
                        <div class="step" id="step4">
                            <div class="step-number">4</div>
                            <div class="step-title">Output Displayed</div>
                            <div class="step-description">The message appears on your screen: Hello, World!</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h3>The Print Function Rules</h3>
                <div class="theory">
                    <p>In Python, you tell the computer to show a message using this exact pattern:</p>
                    <div class="code-example">print("Hello, World!")</div>
                    
                    <p>When you run this code, the computer displays exactly what's between the quotes:</p>
                    <div class="expected-output"><strong>Output:</strong> Hello, World!</div>
                    
                    <div class="tip">
                        <strong>The Magic of Quotes:</strong> The quotes are like invisible envelopes that wrap around your message. They tell Python "this is text that should be displayed exactly as written." Without quotes, Python gets confused and doesn't know what you want to show.
                    </div>
                    
                    <div class="warning">
                        <strong>Remember:</strong> Every opening quote (") needs a closing quote ("). Think of them as a pair that must stay together to protect your message!
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h3>Try It Yourself</h3>
                <div class="python-playground">
                    <div class="playground-header">
                        <span>🐍 Python Practice Area</span>
                        <div class="playground-controls">
                            <button class="btn btn-run" onclick="runCode()">▶ Run Code</button>
                            <button class="btn btn-reset" onclick="resetCode()">🔄 Reset</button>
                        </div>
                    </div>
                    <div class="editor-container">
                        <textarea id="editor">print("Hello, World!")</textarea>
                    </div>
                    <div class="output-container" id="output"></div>
                </div>
            </div>
            
            <div class="mastery-check">
                <h4>Check Your Understanding</h4>
                <div class="mastery-question">
                    <p><strong>Question:</strong> Write a print statement that displays your name.</p>
                    <input type="text" id="masteryAnswer" placeholder='Type your answer here, like: print("Alex")'>
                </div>
                <button class="check-answer-btn" onclick="checkMastery()">Check Answer</button>
                <div id="masteryFeedback" class="feedback" style="display: none;"></div>
            </div>
            
            <div class="practice-section" id="practiceSection" style="display: none;">
                <h4>Additional Practice</h4>
                <div class="practice-grid">
                    <div class="practice-card" onclick="loadPractice('basic')">
                        <h5>More Practice</h5>
                        <p>Need extra practice with print statements? Try more examples.</p>
                        <div class="difficulty-badge basic">Beginner</div>
                    </div>
                    <div class="practice-card" onclick="loadPractice('creative')">
                        <h5>Creative Challenges</h5>
                        <p>Make your print statements more interesting and personal.</p>
                        <div class="difficulty-badge creative">Creative</div>
                    </div>
                    <div class="practice-card" onclick="loadPractice('advanced')">
                        <h5>Extension Tasks</h5>
                        <p>Ready for something more challenging? Try these advanced tasks.</p>
                        <div class="difficulty-badge advanced">Advanced</div>
                    </div>
                </div>
            </div>
            
            <div class="challenge-area" id="challengeArea" style="display: none;">
                <div class="challenge-header">
                    <h4 id="challengeTitle">Challenge Task</h4>
                    <button class="close-challenge-btn" onclick="closeChallengeArea()">× Close</button>
                </div>
                <div id="challengeDescription"></div>
                <div class="python-playground">
                    <div class="playground-header">
                        <span>Challenge Practice Area</span>
                        <div class="playground-controls">
                            <button class="btn btn-run" onclick="runChallengeCode()">▶ Run Code</button>
                            <button class="btn btn-reset" onclick="resetChallengeCode()">🔄 Reset</button>
                        </div>
                    </div>
                    <div class="editor-container">
                        <textarea id="challengeEditor"># Write your code here</textarea>
                    </div>
                    <div class="output-container" id="challengeOutput"></div>
                </div>
                <div class="challenge-navigation">
                    <button class="nav-challenge-btn" onclick="previousChallenge()">← Previous</button>
                    <span id="challengeCounter">1 of 3</span>
                    <button class="nav-challenge-btn" onclick="nextChallenge()">Next →</button>
                </div>
            </div>
        </div>
        
        <div class="lesson-navigation">
            <div class="nav-buttons">
                <a href="#" class="nav-btn disabled">← Previous Lesson</a>
                <a href="navigation.html" class="nav-btn">📚 All Lessons</a>
                <a href="lesson2.html" class="nav-btn" id="nextLessonBtn">Next Lesson →</a>
            </div>
        </div>
    </div>
    
    <!-- CodeMirror JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    
    <script>
        let editor;
        let challengeEditor;
        let masteryCompleted = false;
        const defaultCode = 'print("Hello, World!")';
        
        // Fixed and Simplified Python Interpreter for Lesson 1
        class SimplifiedPrintInterpreter {
            constructor() {
                this.output = [];
            }

            reset() {
                this.output = [];
            }

            execute(code) {
                this.reset();
                
                if (!code || !code.trim()) {
                    return { success: false, message: "Please write some code to run!" };
                }

                try {
                    const lines = this.preprocessCode(code);
                    return this.executeLines(lines);
                } catch (error) {
                    return { success: false, message: `💡 ${error.message}` };
                }
            }

            preprocessCode(code) {
                const lines = code.split('\n')
                    .map(line => line.trim())
                    .filter(line => line.length > 0 && !line.startsWith('#'));

                this.validateSyntax(lines);
                return lines;
            }

            validateSyntax(lines) {
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i];
                    
                    // Check for unclosed quotes
                    if (!this.validateQuotes(line)) {
                        throw new Error(`Missing closing quote on line ${i + 1}. Every opening quote needs a closing quote!`);
                    }

                    // Check for basic print syntax
                    if (line.includes('print')) {
                        if (!this.isValidPrintStatement(line)) {
                            // Check for common mistakes
                            if (line.includes('Print')) {
                                throw new Error('Python is case-sensitive - use lowercase "print", not "Print"');
                            }
                            if (line.includes('PRINT')) {
                                throw new Error('Python is case-sensitive - use lowercase "print", not "PRINT"');
                            }
                            if (line.includes('prin(') || line.includes('pritn(')) {
                                throw new Error('Check the spelling - it should be "print" (with a t at the end)');
                            }
                            if (!line.includes('(') || !line.includes(')')) {
                                throw new Error('Print statements need parentheses: print("your message")');
                            }
                            throw new Error(`Invalid print statement on line ${i + 1}. Try: print("your message")`);
                        }
                    }
                }
            }

            validateQuotes(line) {
                let inQuotes = false;
                let quoteChar = '';
                
                for (let i = 0; i < line.length; i++) {
                    const char = line[i];
                    
                    if ((char === '"' || char === "'") && !inQuotes) {
                        inQuotes = true;
                        quoteChar = char;
                    } else if (char === quoteChar && inQuotes) {
                        if (i === 0 || line[i-1] !== '\\') {
                            inQuotes = false;
                            quoteChar = '';
                        }
                    }
                }
                
                return !inQuotes;
            }

            isValidPrintStatement(line) {
                // More flexible regex that allows extra spaces
                return /^\s*print\s*\([^)]*\)\s*$/.test(line);
            }

            executeLines(lines) {
                for (const line of lines) {
                    try {
                        // Check if line contains 'print' followed by opening parenthesis (with flexible spacing)
                        if (/^\s*print\s*\(/i.test(line)) {
                            this.handlePrint(line);
                        } else {
                            throw new Error(`I don't recognise this command: "${line}". In this lesson, we focus on print() statements.`);
                        }
                    } catch (error) {
                        return { success: false, message: `💡 ${error.message}` };
                    }
                }

                if (this.output.length === 0) {
                    return { success: true, message: "Code ran successfully! Add print() statements to see output." };
                }

                return { 
                    success: true, 
                    message: this.output.join('\n')
                };
            }

            handlePrint(line) {
                // Extract content between parentheses with flexible matching
                const match = line.match(/print\s*\(([^)]*)\)/);
                if (!match) {
                    throw new Error("Invalid print statement format");
                }

                const content = match[1].trim();
                
                if (!content) {
                    // Empty print() - just add blank line
                    this.output.push('');
                    return;
                }

                // Handle multiple arguments separated by commas
                const args = this.parseArguments(content);
                const values = args.map(arg => this.evaluateExpression(arg));
                
                this.output.push(values.join(' '));
            }

            parseArguments(content) {
                const args = [];
                let current = '';
                let inQuotes = false;
                let quoteChar = '';

                for (let i = 0; i < content.length; i++) {
                    const char = content[i];

                    if ((char === '"' || char === "'") && !inQuotes) {
                        inQuotes = true;
                        quoteChar = char;
                        current += char;
                    } else if (char === quoteChar && inQuotes && (i === 0 || content[i-1] !== '\\')) {
                        inQuotes = false;
                        current += char;
                    } else if (char === ',' && !inQuotes) {
                        if (current.trim()) {
                            args.push(current.trim());
                        }
                        current = '';
                    } else {
                        current += char;
                    }
                }

                if (current.trim()) {
                    args.push(current.trim());
                }

                return args;
            }

            evaluateExpression(expr) {
                expr = expr.trim();

                // Handle quoted strings
                if ((expr.startsWith('"') && expr.endsWith('"')) || 
                    (expr.startsWith("'") && expr.endsWith("'"))) {
                    return expr.slice(1, -1);
                }

                // Handle numbers
                if (/^-?\d+(\.\d+)?$/.test(expr)) {
                    return expr;
                }

                // Handle unquoted text (common student mistake)
                if (/^[a-zA-Z]/.test(expr)) {
                    throw new Error(`Text "${expr}" needs quotes around it. Try print("${expr}")`);
                }

                return expr;
            }
        }
        
        // Global interpreter instance
        const pythonInterpreter = new SimplifiedPrintInterpreter();
        
        // Challenge content organised by difficulty with improved concrete examples
        const challenges = {
            basic: [
                {
                    title: "Practice: Your Information",
                    description: "Write three print statements to show your name, age, and favourite subject.",
                    starter: "# Write three print statements below:\n# Example: print(\"Sarah\")\n\n# Your turn - write three print statements:\n# 1. One with your name\n# 2. One with your age\n# 3. One with your favourite subject\n\n",
                    hint: "Look at the example: print(\"Sarah\") - replace \"Sarah\" with your own information!"
                },
                {
                    title: "Practice: School Information", 
                    description: "Print your school name, your year group, and your form/tutor group.",
                    starter: "# Print three pieces of school information\n# Example: print(\"Greenwood High School\")\n\n# Your turn - write three print statements:\n# 1. Your school name\n# 2. Your year group\n# 3. Your form/tutor group\n\n",
                    hint: "Follow the example pattern: print(\"your school information here\")"
                },
                {
                    title: "Practice: Simple Messages",
                    description: "Print a welcome message, a goodbye message, and a thank you message.",
                    starter: "# Create three different messages\n# Example: print(\"Welcome to our classroom!\")\n\n# Your turn - write three print statements:\n# 1. A welcome message\n# 2. A goodbye message\n# 3. A thank you message\n\n",
                    hint: "Follow the example: print(\"Welcome to our classroom!\") - create your own polite messages!"
                }
            ],
            creative: [
                {
                    title: "Creative: Write a Poem",
                    description: "Write a 3-line poem about your favourite animal using three print statements.",
                    starter: "# Write a 3-line poem about your favourite animal\n# Example poem about cats:\nprint(\"Cats are soft and furry friends\")\nprint(\"They purr and play and never end\")\nprint(\"My favourite pet, until the end\")\n\n# Your turn - write a poem about YOUR favourite animal:\n\n",
                    hint: "Follow the example pattern - each line should be in its own print statement. Try to make it rhyme!"
                },
                {
                    title: "Creative: Design a Menu",
                    description: "Create a simple menu for a restaurant. Print the restaurant name and three menu items.",
                    starter: "# Create a restaurant menu\n# Example:\nprint(\"*** Mario's Pizza Palace ***\")\nprint(\"1. Margherita Pizza - £8.50\")\nprint(\"2. Cheese Garlic Bread - £4.20\")\nprint(\"3. Chocolate Brownie - £3.75\")\n\n# Your turn - create your own restaurant menu:\n\n",
                    hint: "Follow the example format - restaurant name with *** decoration, then numbered menu items with prices!"
                },
                {
                    title: "Creative: Story Beginning",
                    description: "Start a short story with three print statements that set the scene.",
                    starter: "# Start a short story with three sentences\n# Example story beginning:\nprint(\"Emily found a mysterious key in her grandmother's attic.\")\nprint(\"The old brass key glowed softly in the dusty sunlight.\")\nprint(\"She wondered what secrets it might unlock.\")\n\n# Your turn - write the beginning of YOUR story:\n\n",
                    hint: "Follow the example: introduce a character, describe the setting, then hint at what happens next!"
                }
            ],
            advanced: [
                {
                    title: "Advanced: ASCII Art",
                    description: "Use print statements to create simple ASCII art, like a smiley face or your initials.",
                    starter: "# Create ASCII art using print statements\n# Example smiley face:\nprint(\"  :-)  \")\nprint(\" /   \\\\ \")\nprint(\"  ---  \")\n\n# Your turn - create your own ASCII art:\n# Try making your initials, a house, or a simple shape\n\n",
                    hint: "Follow the example pattern - use characters like *, -, |, and spaces to make shapes!"
                },
                {
                    title: "Advanced: Formatted Display",
                    description: "Create a formatted display showing information like a simple ID card or profile.",
                    starter: "# Create a formatted ID card display\n# Example:\nprint(\"===================\")\nprint(\"    STUDENT ID     \")\nprint(\"===================\")\nprint(\"Name: Alex Johnson\")\nprint(\"Year: 10\")\nprint(\"Subject: Computer Science\")\nprint(\"===================\")\n\n# Your turn - create your own formatted display:\n\n",
                    hint: "Follow the example format - use = symbols for borders and consistent spacing to make it look neat!"
                },
                {
                    title: "Advanced: Multiple Concepts",
                    description: "Print information that demonstrates you understand why print statements are useful in programming.",
                    starter: "# Show multiple ways print can be used\n# Example:\nprint(\"Print statements help programmers:\")\nprint(\"1. Show results to users\")\nprint(\"2. Debug code by showing values\")\nprint(\"3. Provide feedback and messages\")\nprint(\"4. Display programme output\")\n\n# Your turn - add your own examples of how print() is useful:\n\n",
                    hint: "Follow the example format - explain what print statements do and add your own ideas about why they're useful!"
                }
            ]
        };
        
        let currentChallengeSet = [];
        let currentChallengeIndex = 0;
        
        // Animation demo function with smart timing
        function playExecutionDemo() {
            const steps = document.querySelectorAll('.step');
            const button = document.querySelector('.demo-btn');
            
            // Smart timing based on content complexity and length
            const stepTimings = [
                3000,  // Step 1: "You type: print("Hello, World!")" - 5 words, simple concept
                5000,  // Step 2: "Python reads your code and finds..." - 14 words, complex concept  
                5000,  // Step 3: "Python takes the text from between..." - 14 words, technical process
                4000   // Step 4: "The message appears on your screen..." - 9 words, conclusion
            ];
            
            button.disabled = true;
            button.textContent = '⏳ Running Demo...';
            
            // Reset all steps
            steps.forEach(step => step.classList.remove('active'));
            
            // Animate each step with appropriate timing
            let cumulativeTime = 0;
            steps.forEach((step, index) => {
                setTimeout(() => {
                    step.classList.add('active');
                    
                    // Special handling for the final step
                    if (index === steps.length - 1) {
                        setTimeout(() => {
                            button.disabled = false;
                            button.textContent = '▶ Watch How Print Works';
                            
                            // Keep final step active for a moment, then reset
                            setTimeout(() => {
                                steps.forEach(s => s.classList.remove('active'));
                            }, 3000); // Hold final state for 3 seconds
                        }, 500);
                    }
                }, cumulativeTime);
                
                // Add this step's timing to cumulative total
                cumulativeTime += stepTimings[index];
            });
            
            // Total animation time: 3+5+5+4 = 17 seconds (much better for comprehension!)
        }
        
        // Initialise CodeMirror editor
        function initializeEditor() {
            const textarea = document.getElementById('editor');
            editor = CodeMirror.fromTextArea(textarea, {
                mode: 'python',
                theme: 'monokai',
                lineNumbers: true,
                indentUnit: 4,
                indentWithTabs: false,
                lineWrapping: true,
                fontSize: '14px'
            });
            editor.setValue(defaultCode);
        }
        
        // Main code execution function
        async function runCode() {
            const outputElement = document.getElementById('output');
            const runButton = document.querySelector('.btn-run');
            
            try {
                runButton.disabled = true;
                runButton.textContent = "Running...";
                outputElement.innerHTML = '<div class="loading">Running your code...</div>';
                
                const code = editor.getValue();
                
                await new Promise(resolve => setTimeout(resolve, 300));
                
                const result = pythonInterpreter.execute(code);
                
                if (result.success) {
                    const formattedOutput = result.message.replace(/\n/g, '<br>');
                    outputElement.innerHTML = `<div class="success">${formattedOutput}</div>`;
                } else {
                    outputElement.innerHTML = `<div class="error">${result.message}</div>`;
                }
                
            } catch (error) {
                outputElement.innerHTML = `<div class="error">💡 Unexpected error: ${error.message}</div>`;
            } finally {
                runButton.disabled = false;
                runButton.textContent = "▶ Run Code";
            }
        }

        function resetCode() {
            editor.setValue(defaultCode);
            document.getElementById('output').innerHTML = '';
            pythonInterpreter.reset();
        }
        
        // Fixed mastery check with more flexible pattern matching
        function checkMastery() {
            const answer = document.getElementById('masteryAnswer').value.trim();
            const feedbackElement = document.getElementById('masteryFeedback');
            const nextBtn = document.getElementById('nextLessonBtn');
            const practiceSection = document.getElementById('practiceSection');
            
            // More flexible regex that allows extra spaces and empty strings
            const printPattern = /^\s*print\s*\(\s*["'][^"']*["']\s*\)\s*$/;
            
            if (printPattern.test(answer)) {
                feedbackElement.innerHTML = "🎉 Perfect! You understand exactly how print() works - you've wrapped your message in quotes and used the right syntax. You're ready to continue learning!";
                feedbackElement.className = "feedback correct";
                masteryCompleted = true;
                
                nextBtn.style.opacity = '1';
                nextBtn.style.pointerEvents = 'auto';
                practiceSection.style.display = 'block';
                
            } else if (answer.toLowerCase().includes('print')) {
                if (!answer.includes('"') && !answer.includes("'")) {
                    feedbackElement.innerHTML = "Great start! You remembered 'print' - now wrap your message in quotes like this: print(\"YourName\")";
                } else if (!answer.includes('(') || !answer.includes(')')) {
                    feedbackElement.innerHTML = "You're getting close! Don't forget the parentheses around your message: print(\"YourName\")";
                } else {
                    feedbackElement.innerHTML = "Almost there! Double-check your syntax - it should look like: print(\"YourName\")";
                }
                feedbackElement.className = "feedback incorrect";
            } else {
                feedbackElement.innerHTML = "Remember, we use print() to display messages. Try typing: print(\"YourName\") - you've got this!";
                feedbackElement.className = "feedback incorrect";
            }
            
            feedbackElement.style.display = 'block';
        }
        
        // Practice challenge functions
        function loadPractice(difficulty) {
            currentChallengeSet = challenges[difficulty];
            currentChallengeIndex = 0;
            
            document.getElementById('challengeArea').style.display = 'block';
            document.getElementById('practiceSection').style.display = 'none';
            
            loadCurrentChallenge();
            document.getElementById('challengeArea').scrollIntoView({ behavior: 'smooth' });
        }
        
        function loadCurrentChallenge() {
            const challenge = currentChallengeSet[currentChallengeIndex];
            
            document.getElementById('challengeTitle').textContent = challenge.title;
            document.getElementById('challengeDescription').innerHTML = `
                <div style="background: #e8f4fd; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                    <strong>Task:</strong> ${challenge.description}
                    <div style="margin-top: 0.5rem; font-size: 0.9rem; color: #666;">
                        <strong>Hint:</strong> ${challenge.hint}
                    </div>
                </div>
            `;
            
            challengeEditor.setValue(challenge.starter);
            setTimeout(() => {
                challengeEditor.refresh();
                challengeEditor.setCursor(challengeEditor.lineCount(), 0);
            }, 100);
            
            document.getElementById('challengeOutput').innerHTML = '';
            
            document.getElementById('challengeCounter').textContent = `${currentChallengeIndex + 1} of ${currentChallengeSet.length}`;
            document.querySelector('.nav-challenge-btn').disabled = currentChallengeIndex === 0;
            document.querySelector('.nav-challenge-btn:last-child').disabled = currentChallengeIndex === currentChallengeSet.length - 1;
        }
        
        function previousChallenge() {
            if (currentChallengeIndex > 0) {
                currentChallengeIndex--;
                loadCurrentChallenge();
            }
        }
        
        function nextChallenge() {
            if (currentChallengeIndex < currentChallengeSet.length - 1) {
                currentChallengeIndex++;
                loadCurrentChallenge();
            }
        }
        
        function closeChallengeArea() {
            document.getElementById('challengeArea').style.display = 'none';
            document.getElementById('practiceSection').style.display = 'block';
        }
        
        // Challenge code execution
        async function runChallengeCode() {
            const outputElement = document.getElementById('challengeOutput');
            const runButton = document.querySelector('#challengeArea .btn-run');
            
            try {
                runButton.disabled = true;
                runButton.textContent = "Running...";
                outputElement.innerHTML = '<div class="loading">Running your code...</div>';
                
                const code = challengeEditor.getValue();
                
                await new Promise(resolve => setTimeout(resolve, 300));
                
                const result = pythonInterpreter.execute(code);
                
                if (result.success) {
                    const formattedOutput = result.message.replace(/\n/g, '<br>');
                    outputElement.innerHTML = `<div class="success">${formattedOutput}</div>`;
                } else {
                    outputElement.innerHTML = `<div class="error">${result.message}</div>`;
                }
                
            } catch (error) {
                outputElement.innerHTML = `<div class="error">💡 Unexpected error: ${error.message}</div>`;
            } finally {
                runButton.disabled = false;
                runButton.textContent = "▶ Run Code";
            }
        }
        
        function resetChallengeCode() {
            const challenge = currentChallengeSet[currentChallengeIndex];
            challengeEditor.setValue(challenge.starter);
            setTimeout(() => {
                challengeEditor.refresh();
                challengeEditor.setCursor(challengeEditor.lineCount(), 0);
            }, 100);
            document.getElementById('challengeOutput').innerHTML = '';
            pythonInterpreter.reset();
        }
        
        // Dark Mode Functionality
        function initializeDarkMode() {
            const darkModeToggle = document.getElementById('darkModeToggle');
            const body = document.body;
            
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            if (isDarkMode) {
                body.classList.add('dark-mode');
                darkModeToggle.innerHTML = '☀️ Light Mode';
            }
            
            darkModeToggle.addEventListener('click', function() {
                body.classList.toggle('dark-mode');
                const isNowDark = body.classList.contains('dark-mode');
                
                darkModeToggle.innerHTML = isNowDark ? '☀️ Light Mode' : '🌙 Dark Mode';
                localStorage.setItem('darkMode', isNowDark);
                
                if (editor) {
                    editor.setOption('theme', isNowDark ? 'monokai' : 'default');
                }
                if (challengeEditor) {
                    challengeEditor.setOption('theme', isNowDark ? 'monokai' : 'default');
                }
            });
        }
        
        function initializeChallengeEditor() {
            const textarea = document.getElementById('challengeEditor');
            challengeEditor = CodeMirror.fromTextArea(textarea, {
                mode: 'python',
                theme: 'monokai',
                lineNumbers: true,
                indentUnit: 4,
                indentWithTabs: false,
                lineWrapping: true,
                fontSize: '14px',
                viewportMargin: Infinity
            });
            
            setTimeout(() => {
                challengeEditor.refresh();
            }, 100);
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeEditor();
            initializeChallengeEditor();
            initializeDarkMode();
            
            const nextBtn = document.getElementById('nextLessonBtn');
            nextBtn.style.opacity = '0.5';
            nextBtn.style.pointerEvents = 'none';
        });
    </script>
</body>
</html>
