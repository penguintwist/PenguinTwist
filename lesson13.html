<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 13: User Input + Arithmetic - PenguinTwist</title>
    
    <!-- CodeMirror CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
            transition: all 0.3s ease;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .dark-mode-toggle {
            position: absolute;
            top: 1rem;
            right: 2rem;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .dark-mode-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .nav-back {
            background: white;
            padding: 1rem 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        
        .nav-back .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .nav-back a {
            color: #667eea;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .nav-back a:hover {
            text-decoration: underline;
        }
        
        .lesson-content {
            background: white;
            margin: 2rem auto;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 2rem;
            transition: all 0.3s ease;
        }
        
        .section {
            margin-bottom: 3rem;
        }
        
        .section h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 0.5rem;
        }
        
        .intro {
            background: #e8f4fd;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #4facfe;
        }
        
        .theory {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        
        .code-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            white-space: pre-line;
            line-height: 1.4;
        }
        
        .tip {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            border-left: 4px solid #fdcb6e;
        }
        
        .challenge {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            border-left: 4px solid #dc3545;
        }
        
        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            border-left: 4px solid #dc3545;
        }
        
        .warning strong {
            color: #721c24;
        }
        
        .python-playground {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            overflow: hidden;
            margin: 2rem 0;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
        }
        
        .playground-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 1.5rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .playground-controls {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-run {
            background: #28a745;
            color: white;
        }
        
        .btn-run:hover {
            background: #218838;
            transform: translateY(-1px);
        }
        
        .btn-reset {
            background: #6c757d;
            color: white;
        }
        
        .btn-reset:hover {
            background: #545b62;
            transform: translateY(-1px);
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .editor-container {
            position: relative;
        }
        
        .CodeMirror {
            height: 320px;
            font-size: 14px;
        }
        
        .output-container {
            background: #1a1a1a;
            color: #00ff00;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
            border-top: 1px solid #333;
        }
        
        .output-container:empty::before {
            content: "Click 'Run Code' to see output here...";
            color: #666;
            font-style: italic;
        }
        
        .loading {
            color: #ffc107;
        }
        
        .error {
            color: #ff6b6b;
        }
        
        .challenges-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 12px;
            color: white;
        }
        
        .challenges-section h4 {
            margin-bottom: 1rem;
            font-size: 1.3rem;
            text-align: center;
        }
        
        .challenges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }
        
        .challenge-item {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: transform 0.3s ease, background 0.3s ease;
            cursor: pointer;
        }
        
        .challenge-item:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.3);
        }
        
        .challenge-item strong {
            color: #fff3cd;
            margin-right: 0.5rem;
        }
        
        .lesson-navigation {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin: 2rem 0;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 25px;
            text-decoration: none;
            display: inline-block;
            font-weight: 600;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        /* Dark Mode Styles */
        body.dark-mode {
            background: #1a1a1a;
            color: #e0e0e0;
        }
        
        body.dark-mode .header {
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
        }
        
        body.dark-mode .dark-mode-toggle {
            background: rgba(251, 191, 36, 0.2);
            border-color: rgba(251, 191, 36, 0.3);
            color: #fbbf24;
        }
        
        body.dark-mode .dark-mode-toggle:hover {
            background: rgba(251, 191, 36, 0.3);
        }
        
        body.dark-mode .nav-back {
            background: #2d3748;
        }
        
        body.dark-mode .nav-back a {
            color: #81c784;
        }
        
        body.dark-mode .lesson-content,
        body.dark-mode .lesson-navigation {
            background: #2d3748;
            color: #e0e0e0;
        }
        
        body.dark-mode .intro {
            background: #1e3a3a;
            border-left-color: #4facfe;
        }
        
        body.dark-mode .theory {
            background: #1e2d1e;
            border-left-color: #28a745;
        }
        
        body.dark-mode .tip {
            background: #3d3520;
            border-color: #ffeaa7;
            color: #fff3cd;
        }
        
        body.dark-mode .challenge {
            background: #3d2020;
            border-color: #f5c6cb;
            color: #f8d7da;
        }
        
        body.dark-mode .warning {
            background: #3d2020;
            border-color: #f5c6cb;
            color: #f8d7da;
        }
        
        body.dark-mode .warning strong {
            color: #f8d7da;
        }
        
        body.dark-mode .challenges-section {
            background: linear-gradient(135deg, #6b46c1 0%, #7c3aed 100%);
        }
        
        body.dark-mode .challenge-item {
            background: rgba(255, 255, 255, 0.1);
        }
        
        body.dark-mode .challenge-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        body.dark-mode .section h3 {
            color: #81c784;
            border-bottom-color: #81c784;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .lesson-content {
                padding: 1rem;
            }
            
            .playground-header {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .dark-mode-toggle {
                top: 0.5rem;
                right: 1rem;
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <button id="darkModeToggle" class="dark-mode-toggle">üåô Dark Mode</button>
        <div class="container">
            <h1>Lesson 13: User Input + Arithmetic</h1>
            <p>Create interactive calculators using user input and mathematical operations!</p>
        </div>
    </div>
    
    <div class="nav-back">
        <div class="container">
            <a href="navigation.html">‚Üê Back to All Lessons</a>
        </div>
    </div>
    
    <div class="container">
        <div class="lesson-content">
            <div class="section">
                <h3>üìö Introduction</h3>
                <div class="intro">
                    <p>Now you can combine two powerful skills: getting input from users and performing mathematical calculations. This lets you create interactive programs like calculators, converters, and problem solvers.</p>
                    <p>Imagine building a tip calculator, a currency converter, or a program that calculates your exam average - that's the power of combining input with arithmetic!</p>
                </div>
            </div>
            
            <div class="section">
                <h3>üî¨ Theory</h3>
                <div class="theory">
                    <h4 style="color: #667eea; margin: 1.5rem 0 1rem 0;">Converting Input to Numbers</h4>
                    <p>Remember: <code>input()</code> always returns a string. To do math, we need to convert it to numbers:</p>
                    <div class="code-example"># Converting string input to numbers
age_text = input("How old are you? ")    # This is a string
age_number = int(age_text)               # Convert to integer

height_text = input("Height in metres? ") # This is a string  
height_number = float(height_text)       # Convert to float

# Or do it all in one line
weight = float(input("Weight in kg? "))  # Convert directly</div>
                    
                    <h4 style="color: #667eea; margin: 1.5rem 0 1rem 0;">Basic Calculator Example</h4>
                    <div class="code-example"># Simple addition calculator
print("=== Addition Calculator ===")

# Get two numbers from user
num1 = float(input("Enter first number: "))
num2 = float(input("Enter second number: "))

# Calculate the result
result = num1 + num2

# Display the answer
print(f"{num1} + {num2} = {result}")</div>
                    
                    <h4 style="color: #667eea; margin: 1.5rem 0 1rem 0;">More Complex Example</h4>
                    <div class="code-example"># Area calculator for rectangles
print("=== Rectangle Area Calculator ===")

length = float(input("Enter length: "))
width = float(input("Enter width: "))

area = length * width
perimeter = 2 * (length + width)

print(f"Rectangle dimensions: {length} x {width}")
print(f"Area: {area} square units")
print(f"Perimeter: {perimeter} units")</div>
                    
                    <h4 style="color: #667eea; margin: 1.5rem 0 1rem 0;">Multiple Operations Example</h4>
                    <div class="code-example"># Grade calculator
print("=== Grade Calculator ===")

test1 = float(input("Enter first test score: "))
test2 = float(input("Enter second test score: "))
test3 = float(input("Enter third test score: "))

# Calculate average
total = test1 + test2 + test3
average = total / 3

print(f"Test scores: {test1}, {test2}, {test3}")
print(f"Total points: {total}")
print(f"Average grade: {average:.1f}%")</div>
                    
                    <div class="warning">
                        <strong>‚ö†Ô∏è Important:</strong> Always convert input to the right data type before doing arithmetic. If the user enters "5" and you don't convert it, Python will treat it as text, not the number 5!
                    </div>
                    
                    <div class="tip">
                        <strong>üí° Tip:</strong> Use <code>int()</code> for whole numbers and <code>float()</code> for decimal numbers. When in doubt, <code>float()</code> works for both whole and decimal numbers.
                    </div>
                    
                    <div class="challenge">
                        <strong>üéØ Challenge:</strong> Create a program that calculates how much money you'll save if you put aside a certain amount each week for a year (52 weeks). Include compound interest if you want an extra challenge!
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h3>üíª Interactive Coding</h3>
                <div class="python-playground">
                    <div class="playground-header">
                        <span>üêç Python Playground - Lesson 13</span>
                        <div class="playground-controls">
                            <button class="btn btn-run" onclick="runCode()">‚ñ∂ Run Code</button>
                            <button class="btn btn-reset" onclick="resetCode()">üîÑ Reset</button>
                        </div>
                    </div>
                    <div class="editor-container">
                        <textarea id="editor"># Multi-purpose calculator
print("=== Personal Finance Calculator ===")

# Get user's financial information
monthly_income = float(input("Monthly income (¬£): "))
rent = float(input("Monthly rent (¬£): "))
food = float(input("Monthly food budget (¬£): "))
transport = float(input("Monthly transport (¬£): "))

print("")
print("=== Your Financial Summary ===")

# Calculate expenses and savings
total_expenses = rent + food + transport
remaining = monthly_income - total_expenses
savings_rate = (remaining / monthly_income) * 100

print(f"Monthly Income: ¬£{monthly_income}")
print(f"Total Expenses: ¬£{total_expenses}")
print(f"Money Left Over: ¬£{remaining}")
print(f"Savings Rate: {savings_rate:.1f}%")

print("")
print("=== Future Projections ===")

# Calculate yearly projections
yearly_savings = remaining * 12
five_year_savings = yearly_savings * 5

print(f"Yearly Savings: ¬£{yearly_savings}")
print(f"5-Year Savings: ¬£{five_year_savings}")

# Calculate percentage breakdowns
rent_percent = (rent / monthly_income) * 100
food_percent = (food / monthly_income) * 100
transport_percent = (transport / monthly_income) * 100

print("")
print("=== Expense Breakdown ===")
print(f"Rent: {rent_percent:.1f}% of income")
print(f"Food: {food_percent:.1f}% of income") 
print(f"Transport: {transport_percent:.1f}% of income")

# Provide some advice
if savings_rate >= 20:
    print(f"Great job! You're saving {savings_rate:.1f}% of your income.")
elif savings_rate >= 10:
    print(f"Good work! {savings_rate:.1f}% savings rate is solid.")
else:
    print(f"Consider reducing expenses. {savings_rate:.1f}% savings could be higher.")</textarea>
                    </div>
                    <div class="output-container" id="output"></div>
                </div>
                
                <div class="challenges-section">
                    <h4>üéØ Practice Challenges</h4>
                    <div class="challenges-grid">
                        <div class="challenge-item">
                            <strong>1.</strong> Create a tip calculator (bill amount √ó tip percentage)
                        </div>
                        <div class="challenge-item">
                            <strong>2.</strong> Build a temperature converter (Celsius to Fahrenheit)
                        </div>
                        <div class="challenge-item">
                            <strong>3.</strong> Make a BMI calculator (weight √∑ height¬≤)
                        </div>
                        <div class="challenge-item">
                            <strong>4.</strong> Create a currency converter (amount √ó exchange rate)
                        </div>
                        <div class="challenge-item">
                            <strong>5.</strong> Build a compound interest calculator
                        </div>
                        <div class="challenge-item">
                            <strong>6.</strong> Make a petrol cost calculator (distance √∑ mpg √ó price)
                        </div>
                        <div class="challenge-item">
                            <strong>7.</strong> Create a pizza price per person calculator
                        </div>
                        <div class="challenge-item">
                            <strong>8.</strong> Build a time converter (hours to minutes/seconds)
                        </div>
                        <div class="challenge-item">
                            <strong>9.</strong> Make a simple loan payment calculator
                        </div>
                        <div class="challenge-item">
                            <strong>10.</strong> Create an exam grade predictor (current average + final exam)
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="lesson-navigation">
            <div class="nav-buttons">
                <a href="lesson12.html" class="nav-btn">‚Üê Previous Lesson</a>
                <a href="navigation.html" class="nav-btn">üìö All Lessons</a>
                <a href="lesson14.html" class="nav-btn">Next Lesson ‚Üí</a>
            </div>
        </div>
    </div>
    
    <!-- CodeMirror JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    
    <script>
        let editor;
        const defaultCode = `# Multi-purpose calculator
print("=== Personal Finance Calculator ===")

# Get user's financial information
monthly_income = float(input("Monthly income (¬£): "))
rent = float(input("Monthly rent (¬£): "))
food = float(input("Monthly food budget (¬£): "))
transport = float(input("Monthly transport (¬£): "))

print("")
print("=== Your Financial Summary ===")

# Calculate expenses and savings
total_expenses = rent + food + transport
remaining = monthly_income - total_expenses
savings_rate = (remaining / monthly_income) * 100

print(f"Monthly Income: ¬£{monthly_income}")
print(f"Total Expenses: ¬£{total_expenses}")
print(f"Money Left Over: ¬£{remaining}")
print(f"Savings Rate: {savings_rate:.1f}%")

print("")
print("=== Future Projections ===")

# Calculate yearly projections
yearly_savings = remaining * 12
five_year_savings = yearly_savings * 5

print(f"Yearly Savings: ¬£{yearly_savings}")
print(f"5-Year Savings: ¬£{five_year_savings}")

# Calculate percentage breakdowns
rent_percent = (rent / monthly_income) * 100
food_percent = (food / monthly_income) * 100
transport_percent = (transport / monthly_income) * 100

print("")
print("=== Expense Breakdown ===")
print(f"Rent: {rent_percent:.1f}% of income")
print(f"Food: {food_percent:.1f}% of income") 
print(f"Transport: {transport_percent:.1f}% of income")

# Provide some advice
if savings_rate >= 20:
    print(f"Great job! You're saving {savings_rate:.1f}% of your income.")
elif savings_rate >= 10:
    print(f"Good work! {savings_rate:.1f}% savings rate is solid.")
else:
    print(f"Consider reducing expenses. {savings_rate:.1f}% savings could be higher.")`;
        
        // Initialize CodeMirror editor
        function initializeEditor() {
            const textarea = document.getElementById('editor');
            editor = CodeMirror.fromTextArea(textarea, {
                mode: 'python',
                theme: 'monokai',
                lineNumbers: true,
                indentUnit: 4,
                indentWithTabs: false,
                lineWrapping: true
            });
            editor.setValue(defaultCode);
        }
        
        // Simple Python interpreter for educational purposes
        class SimplePythonInterpreter {
            constructor() {
                this.variables = {};
                this.output = [];
                this.inputResponses = {
                    "Monthly income (¬£): ": "2500",
                    "Monthly rent (¬£): ": "800",
                    "Monthly food budget (¬£): ": "300",
                    "Monthly transport (¬£): ": "150"
                };
            }
            
            reset() {
                this.variables = {};
                this.output = [];
            }
            
            print(...args) {
                const line = args.map(arg => String(arg)).join(' ');
                this.output.push(line);
            }
            
            input(prompt) {
                const response = this.inputResponses[prompt] || "0";
                this.output.push(prompt + response);
                return response;
            }
            
            executeCode(code) {
                this.reset();
                const lines = code.split('\n').map(line => line.trim()).filter(line => line && !line.startsWith('#'));
                
                try {
                    for (const line of lines) {
                        this.executeLine(line);
                    }
                    
                    if (this.output.length === 0) {
                        return 'Code executed successfully (no output)';
                    }
                    
                    return this.output.join('\n');
                } catch (error) {
                    return `Error: ${error.message}`;
                }
            }
            
            executeLine(line) {
                if (line.startsWith('print(')) {
                    this.handlePrint(line);
                } else if (line.includes('= float(input(')) {
                    this.handleFloatInput(line);
                } else if (line.includes(' = ')) {
                    this.handleAssignment(line);
                } else if (line.includes('if ') || line.includes('elif ') || line.includes('else:')) {
                    this.handleConditional(line);
                }
            }
            
            handleFloatInput(line) {
                const parts = line.split(' = ');
                const varName = parts[0].trim();
                const promptMatch = line.match(/input\("([^"]*)"\)/);
                const prompt = promptMatch ? promptMatch[1] + " " : "";
                const response = this.input(prompt);
                this.variables[varName] = parseFloat(response);
            }
            
            handlePrint(line) {
                const content = line.slice(6, -1); // Remove 'print(' and ')'
                if (content.startsWith('f"') && content.endsWith('"')) {
                    let output = content.slice(2, -1);
                    // Handle simple variable substitution
                    for (const [varName, value] of Object.entries(this.variables)) {
                        const regex = new RegExp(`\\{${varName}\\}`, 'g');
                        output = output.replace(regex, value);
                        const formatRegex = new RegExp(`\\{${varName}:\\.1f\\}`, 'g');
                        output = output.replace(formatRegex, value.toFixed(1));
                    }
                    this.print(output);
                } else if (content.startsWith('"') && content.endsWith('"')) {
                    this.print(content.slice(1, -1));
                }
            }
            
            handleAssignment(line) {
                const parts = line.split(' = ');
                const varName = parts[0].trim();
                const expression = parts[1].trim();
                this.variables[varName] = this.evaluateExpression(expression);
            }
            
            evaluateExpression(expr) {
                // Handle basic arithmetic
                if (expr.includes(' + ')) {
                    const parts = expr.split(' + ');
                    return parts.reduce((sum, part) => sum + this.getValue(part.trim()), 0);
                }
                if (expr.includes(' - ')) {
                    const parts = expr.split(' - ');
                    let result = this.getValue(parts[0].trim());
                    for (let i = 1; i < parts.length; i++) {
                        result -= this.getValue(parts[i].trim());
                    }
                    return result;
                }
                if (expr.includes(' * ')) {
                    const parts = expr.split(' * ');
                    return parts.reduce((product, part) => product * this.getValue(part.trim()), 1);
                }
                if (expr.includes(' / ')) {
                    const parts = expr.split(' / ');
                    let result = this.getValue(parts[0].trim());
                    for (let i = 1; i < parts.length; i++) {
                        result /= this.getValue(parts[i].trim());
                    }
                    return result;
                }
                
                return this.getValue(expr);
            }
            
            getValue(token) {
                if (this.variables.hasOwnProperty(token)) {
                    return this.variables[token];
                }
                return parseFloat(token) || 0;
            }
            
            handleConditional(line) {
                if (line.includes('savings_rate >= 20')) {
                    const rate = this.variables.savings_rate || 0;
                    if (rate >= 20) {
                        this.print(`Great job! You're saving ${rate.toFixed(1)}% of your income.`);
                    }
                } else if (line.includes('savings_rate >= 10')) {
                    const rate = this.variables.savings_rate || 0;
                    if (rate >= 10 && rate < 20) {
                        this.print(`Good work! ${rate.toFixed(1)}% savings rate is solid.`);
                    }
                } else if (line.includes('else:')) {
                    const rate = this.variables.savings_rate || 0;
                    if (rate < 10) {
                        this.print(`Consider reducing expenses. ${rate.toFixed(1)}% savings could be higher.`);
                    }
                }
            }
        }
        
        const pythonInterpreter = new SimplePythonInterpreter();
        
        // Run Python code
        async function runCode() {
            const outputElement = document.getElementById('output');
            const runButton = document.querySelector('.btn-run');
            
            try {
                runButton.disabled = true;
                runButton.textContent = "Running...";
                outputElement.innerHTML = '<div class="loading">Running your code...</div>';
                
                const code = editor.getValue();
                
                await new Promise(resolve => setTimeout(resolve, 500));
                
                const output = pythonInterpreter.executeCode(code);
                outputElement.innerHTML = `<pre>${output}</pre>`;
                
            } catch (error) {
                outputElement.innerHTML = `<div class="error">Error: ${error.message}</div>`;
            } finally {
                runButton.disabled = false;
                runButton.textContent = "‚ñ∂ Run Code";
            }
        }
        
        // Reset code to default
        function resetCode() {
            editor.setValue(defaultCode);
            document.getElementById('output').innerHTML = '';
        }
        
        // Dark Mode Functionality
        function initializeDarkMode() {
            const darkModeToggle = document.getElementById('darkModeToggle');
            const body = document.body;
            
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            if (isDarkMode) {
                body.classList.add('dark-mode');
                darkModeToggle.innerHTML = '‚òÄÔ∏è Light Mode';
            }
            
            darkModeToggle.addEventListener('click', function() {
                body.classList.toggle('dark-mode');
                const isNowDark = body.classList.contains('dark-mode');
                
                darkModeToggle.innerHTML = isNowDark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
                localStorage.setItem('darkMode', isNowDark);
                
                if (editor) {
                    editor.setOption('theme', isNowDark ? 'monokai' : 'default');
                }
            });
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeEditor();
            initializeDarkMode();
        });
    </script>
</body>
</html>
                