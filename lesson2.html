<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2: Variables - PenguinTwist</title>
    
    <!-- CodeMirror CSS - Load First -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    
    <!-- Skulpt Python Interpreter -->
    <script src="https://unpkg.com/skulpt@0.11.1/dist/skulpt.min.js"></script>
    <script src="https://unpkg.com/skulpt@0.11.1/dist/skulpt-stdlib.js"></script>
    
    <!-- Streamlined Styles -->
    <link rel="stylesheet" href="shared/lesson-styles-clean.css">
</head>
<body>
    <!-- Header Section -->
    <div class="header">
        <div class="dark-mode-container" id="dark-mode-container">
            <label class="dark-mode-label" id="dark-mode-label">üåô Dark Mode</label>
        </div>
        <div class="container">
            <h1>Lesson 2: Variables</h1>
            <p>Give your programs memory - store and remember information</p>
        </div>
    </div>
    
    <!-- Navigation -->
    <div class="nav-back">
        <div class="container">
            <a href="navigation.html">‚Üê Back to All Lessons</a>
            <span style="color: #666;">Previous: <a href="lesson1.html" style="color: #667eea;">Hello World</a></span>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="container">
        <div class="lesson-content">
            
            <!-- Introduction Section - CHUNKED -->
            <div class="section">
                <h3>Why Programs Need Memory</h3>
                
                <div class="concept-chunk">
                    <p>Imagine a calculator that forgets your answer the moment you press equals.</p>
                    <p>Or a game that resets your score every time you collect a coin.</p>
                </div>
                
                <div class="quick-check">
                    <p><strong>Quick think:</strong> What would happen if your phone forgot your contacts every time you closed it?</p>
                    <div class="mc-container">
                        <div class="mc-option" onclick="selectAnswer(this, false, 'memory1')">
                            A) It would work fine - you could just re-enter them
                        </div>
                        <div class="mc-option" onclick="selectAnswer(this, true, 'memory1')">
                            B) It would be completely useless for communication
                        </div>
                        <div class="mc-option" onclick="selectAnswer(this, false, 'memory1')">
                            C) It would only affect calling, not texting
                        </div>
                    </div>
                    <div id="feedback-memory1" class="feedback-message"></div>
                </div>
                
                <div class="concept-chunk">
                    <p>Programs need to remember information to be useful.</p>
                    <p>Variables are like labelled storage boxes in the computer's memory.</p>
                </div>
                
                <div class="rule-chunk">
                    <h4>What Variables Store</h4>
                    <p>Names, scores, messages, or any data your program needs to remember.</p>
                </div>
            </div>
            
            <!-- Memory Box Visualization -->
            <div class="section">
                <h3>Understanding Variables as Memory Boxes</h3>
                <div class="theory">
                    <p>Think of variables as labeled boxes in a warehouse. Each box has:</p>
                    <p>‚Ä¢ A <strong>name</strong> (the label on the box)</p>
                    <p>‚Ä¢ A <strong>location</strong> (where Python can find it in memory)</p>
                    
                    <div class="tip">
                        <strong>Memory Box Metaphor:</strong> When you create a variable called "name", Python creates a box labeled "name" and puts your value inside it. Whenever you use that variable name later, Python opens the box and looks at what's inside.
                    </div>
                </div>
                
                <!-- Simple Memory Visualization -->
                <div id="memoryBoxDemo" class="memory-visualization-container"></div>
                
                <!-- NEW: Interactive Variable Assignment Animation -->
                <div id="variableAssignmentDemo" class="animation-container"></div>
            </div>
            
            <!-- Creating Variables Section - CHUNKED -->
            <div class="section">
                <h3>Creating Your First Variable</h3>
                
                <div class="concept-chunk">
                    <p>In Python, you create a variable using the assignment operator (the equals sign).</p>
                    <div class="code-example">name = "Alex"</div>
                </div>
                
                <div class="detail-chunk">
                    <details>
                        <summary>What does this actually do? (Click to expand)</summary>
                        <div class="detail-content">
                            <p>This creates a memory box labelled 'name' and stores the text "Alex" inside it.</p>
                            <p>The equals sign means "store the value on the right into the variable on the left."</p>
                        </div>
                    </details>
                </div>
                
                <div class="rule-chunk">
                    <h4>Critical Rule</h4>
                    <p>Text must be wrapped in quotes, but numbers don't need quotes.</p>
                    <div class="rule-examples">
                        <div class="code-example">name = "Alex"  ‚Üê Text needs quotes</div>
                        <div class="code-example">age = 15      ‚Üê Numbers don't</div>
                    </div>
                </div>
                
                <div class="quick-check">
                    <p><strong>Quick check:</strong> Which of these correctly creates a variable for someone's age?</p>
                    <div class="mc-container">
                        <div class="mc-option" onclick="selectAnswer(this, false, 'variable1')">
                            A) "age" = 16
                        </div>
                        <div class="mc-option" onclick="selectAnswer(this, true, 'variable1')">
                            B) age = 16
                        </div>
                        <div class="mc-option" onclick="selectAnswer(this, false, 'variable1')">
                            C) age = "16"
                        </div>
                    </div>
                    <div id="feedback-variable1" class="feedback-message"></div>
                </div>
            </div>
            
            <!-- Practice Section -->
            <div class="section">
                <h3>Try Creating Variables</h3>
                <div class="theory">
                    <p>Now it's time to try creating your own variables! This playground uses real Python - you can create variables, store values, and see them in memory.</p>
                    
                    <div class="tip">
                        <strong>What to Try:</strong>
                        <br>‚Ä¢ Create a variable for your name: name = "Your Name"
                        <br>‚Ä¢ Create a variable for your age: age = 16
                        <br>‚Ä¢ Watch how they appear in the memory tracker below
                    </div>
                </div>
                
                <!-- Python Playground 1 -->
                <div id="variablePracticePlayground" class="python-playground-container"></div>
            </div>
            
            <!-- Using Variables with Print Section - CHUNKED -->
            <div class="section">
                <h3>Using Variables with Print</h3>
                
                <div class="concept-chunk">
                    <p>Now that you can create variables, you can use them with print statements.</p>
                    <p>This is where the magic happens - your program can remember and display information!</p>
                </div>
                
                <div class="rule-chunk">
                    <h4>Key Example</h4>
                    <div class="code-example">name = "Alex"
print(name)</div>
                    <div class="expected-output"><strong>Output:</strong> Alex</div>
                </div>
                
                <div class="quick-check">
                    <p><strong>Spot the difference:</strong> What's different between these two print statements?</p>
                    <div class="code-comparison">
                        <div class="code-example">print(name)</div>
                        <div class="code-example">print("name")</div>
                    </div>
                    <div class="mc-container">
                        <div class="mc-option" onclick="selectAnswer(this, false, 'print1')">
                            A) They do exactly the same thing
                        </div>
                        <div class="mc-option" onclick="selectAnswer(this, true, 'print1')">
                            B) First prints the contents of variable, second prints the word "name"
                        </div>
                        <div class="mc-option" onclick="selectAnswer(this, false, 'print1')">
                            C) First will cause an error, second works fine
                        </div>
                    </div>
                    <div id="feedback-print1" class="feedback-message"></div>
                </div>
                
                <div class="concept-chunk">
                    <p>You can print multiple variables to show different pieces of information:</p>
                    <div class="code-example">name = "Alex"
age = 15
print(name)
print(age)</div>
                </div>
                
                <div class="transition-chunk">
                    <p>Ready to try this yourself? Use the playground below to practice.</p>
                </div>
                
                <!-- Python Playground 2 -->
                <div id="variablePrintPlayground" class="python-playground-container"></div>
                
                <div class="tip">
                    <strong>Experiments to Try:</strong>
                    <br>‚Ä¢ Change "Alex" to your own name
                    <br>‚Ä¢ Add a new variable for your favorite subject
                    <br>‚Ä¢ Try storing a number without quotes
                    <br>‚Ä¢ What happens if you forget the quotes around text?
                    <br>‚Ä¢ Can you create 5 different variables and print them all?
                </div>
            </div>
            
            <!-- Assessment Section -->
            <div id="masteryCheck" class="mastery-check-container"></div>
            
            <!-- Practice Challenges Section (Hidden Initially) -->
            <div id="practiceSection" class="practice-section" style="display: none;">
                <div class="section">
                    <h3>üèÜ Practice Challenges</h3>
                    <div class="theory">
                        <p>Great work! You've mastered the basics of variables. Now try these practice challenges to strengthen your skills:</p>
                    </div>
                    
                    <!-- Basic Challenges -->
                    <div class="challenge-category">
                        <h4>Basic Challenges</h4>
                        
                        <div class="challenge-item">
                            <h5>Create Your Profile</h5>
                            <p>Create variables for your name, age, and favorite color. Then print all three.</p>
                            <div id="challenge1" class="python-playground-container"></div>
                        </div>
                        
                        <div class="challenge-item">
                            <h5>Numbers and Text</h5>
                            <p>Create one variable with text (in quotes) and one with a number (no quotes).</p>
                            <div id="challenge2" class="python-playground-container"></div>
                        </div>
                    </div>
                    
                    <!-- Creative Challenges -->
                    <div class="challenge-category">
                        <h4>Creative Challenges</h4>
                        
                        <div class="challenge-item">
                            <h5>Character Creator</h5>
                            <p>Create a character with a name, superpower, and hometown. Print a character profile.</p>
                            <div id="challenge3" class="python-playground-container"></div>
                        </div>
                        
                        <div class="challenge-item">
                            <h5>School Timetable</h5>
                            <p>Create variables for different school subjects and print your timetable.</p>
                            <div id="challenge4" class="python-playground-container"></div>
                        </div>
                    </div>
                    
                    <!-- Advanced Challenges -->
                    <div class="challenge-category">
                        <h4>Advanced Challenges</h4>
                        
                        <div class="challenge-item">
                            <h5>Mixed Data Challenge</h5>
                            <p>Create variables with different data types: text, numbers, and experiment with their uses.</p>
                            <div id="challenge5" class="python-playground-container"></div>
                        </div>
                        
                        <div class="challenge-item">
                            <h5>Variable Update Challenge</h5>
                            <p>Create a variable, print it, change its value, then print it again to see how variables can be updated.</p>
                            <div id="challenge6" class="python-playground-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Navigation Footer -->
    <div class="container">
        <div class="lesson-navigation">
            <div class="nav-buttons">
                <a href="lesson1.html" class="nav-btn">‚Üê Previous Lesson</a>
                <a href="navigation.html" class="nav-btn">üìö All Lessons</a>
                <a href="lesson3.html" class="nav-btn disabled" id="nextLessonBtn">Next Lesson ‚Üí</a>
            </div>
        </div>
    </div>
    
    <!-- JavaScript - Load Order Critical -->
    <!-- CodeMirror JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    
    <!-- NEW: Analytics System (Load First) -->
    <script src="shared/analytics.js"></script>
    
    <!-- NEW: Variable Animation System -->
    <script src="shared/variable-animator.js"></script>
    
    <!-- Shared Components - Streamlined -->
    <script src="shared/python-interpreter-clean.js"></script>
    <script src="shared/lesson-components-clean.js"></script>
    
    <!-- Lesson Logic (Analytics Enhanced) -->
    <script src="shared/lesson2-logic.js"></script>
    
    <!-- Multiple Choice Functionality -->
    <script>
    function selectAnswer(element, isCorrect, questionId) {
        // Track multiple choice interactions
        if (window.penguinAnalytics) {
            window.penguinAnalytics.trackFeatureUsage('multiple_choice', 'lesson2', {
                questionId: questionId,
                isCorrect: isCorrect,
                selectedText: element.textContent.trim()
            });
        }
        
        // Disable all options for this question
        var container = element.parentNode;
        var options = container.querySelectorAll('.mc-option');
        options.forEach(function(option) {
            option.classList.add('disabled');
            option.onclick = null;
        });
        
        // Mark the selected answer
        if (isCorrect) {
            element.classList.add('selected-correct');
        } else {
            element.classList.add('selected-wrong');
        }
        
        // Show feedback
        var feedback = document.getElementById('feedback-' + questionId);
        feedback.style.display = 'block';
        
        // Customized feedback based on question
        if (questionId === 'memory1') {
            if (isCorrect) {
                feedback.className = 'feedback-message feedback-correct';
                feedback.innerHTML = '‚úÖ Exactly! Without memory, programs become useless. Variables give programs the ability to remember important information.';
            } else {
                feedback.className = 'feedback-message feedback-wrong';
                feedback.innerHTML = 'üí° Think about how frustrating it would be to re-enter all your contacts every time. Programs need memory to be useful.';
            }
        } else if (questionId === 'variable1') {
            if (isCorrect) {
                feedback.className = 'feedback-message feedback-correct';
                feedback.innerHTML = '‚úÖ Correct! Age is a number, so no quotes needed. Variable name on the left, value on the right.';
            } else if (element.textContent.includes('"age"')) {
                feedback.className = 'feedback-message feedback-wrong';
                feedback.innerHTML = 'üí° The variable name should not have quotes. Only put quotes around the VALUE if it\'s text.';
            } else {
                feedback.className = 'feedback-message feedback-wrong';
                feedback.innerHTML = 'üí° Age is a number for calculations, so it shouldn\'t have quotes. Quotes make it into text instead.';
            }
        } else if (questionId === 'print1') {
            if (isCorrect) {
                feedback.className = 'feedback-message feedback-correct';
                feedback.innerHTML = '‚úÖ Perfect! print(name) shows what\'s INSIDE the variable. print("name") just shows the word "name".';
            } else {
                feedback.className = 'feedback-message feedback-wrong';
                feedback.innerHTML = 'üí° They\'re very different! Quotes tell Python to print the exact text. No quotes means print what\'s stored in the variable.';
            }
        }
    }
    
    // Helper functions for backward compatibility
    window.unlockNextLesson = function() {
        var nextBtn = document.getElementById('nextLessonBtn');
        if (nextBtn) {
            nextBtn.classList.remove('disabled');
            nextBtn.href = 'lesson3.html';
            
            // Track lesson unlock
            if (window.penguinAnalytics) {
                window.penguinAnalytics.trackProgressFlow('lesson2', 'lesson3', 'unlock');
            }
        }
    };
    
    window.showPracticeSection = function() {
        var practiceSection = document.getElementById('practiceSection');
        if (practiceSection) {
            practiceSection.style.display = 'block';
            practiceSection.scrollIntoView({ behavior: 'smooth' });
            
            // Track practice section access
            if (window.penguinAnalytics) {
                window.penguinAnalytics.trackFeatureUsage('practice_section', 'lesson2', { accessed: true });
            }
        }
    };
    
    // Track page visibility for engagement metrics
    document.addEventListener('visibilitychange', function() {
        if (window.penguinAnalytics) {
            if (document.hidden) {
                window.penguinAnalytics.trackFeatureUsage('page_visibility', 'lesson2', { visible: false });
            } else {
                window.penguinAnalytics.trackFeatureUsage('page_visibility', 'lesson2', { visible: true });
            }
        }
    });
    
    // Track scroll depth for engagement
    var maxScrollDepth = 0;
    window.addEventListener('scroll', function() {
        var scrollPercent = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
        
        if (scrollPercent > maxScrollDepth) {
            maxScrollDepth = scrollPercent;
            
            // Track significant scroll milestones
            if (window.penguinAnalytics && maxScrollDepth % 25 === 0 && maxScrollDepth > 0) {
                window.penguinAnalytics.trackFeatureUsage('scroll_depth', 'lesson2', { depth: maxScrollDepth });
            }
        }
    });
    </script>
</body>
</html>
